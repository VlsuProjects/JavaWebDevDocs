_# [**Назад**: *Синтаксис Thymeleaf*](../features/thymeleaf-syntax.md)

# Локализация в Thymeleaf

Локализация - это процесс адаптации программного обеспечения к различным языкам и региональным стандартам. Веб-приложения также должны быть локализованы, чтобы быть доступными для пользователей из разных стран. Thymeleaf предоставляет возможность локализации ваших HTML-шаблонов при помощи файлов локализации.

Локализация настраивается в файле `application.properties`:

```properties
spring.messages.basename=messages
```

В этом примере, мы указали, что файлы локализации будут находиться в корне проекта и называться `messages.properties`. Теперь, создадим файл локализации `messages.properties` в корне проекта. Так как файл не имеет привязки к языку, то он будет использоваться по умолчанию, если не будет найден файл для нужного языка. В файле `messages.properties` добавим сообщение:

```properties
hello=Hello, World!
```

Как видим, мы добавили сообщение, которое называется hello и имеет значение "Hello, World!". Теперь, мы можем использовать это сообщение в HTML-шаблоне следующим образом

```html
<div th:text="#{hello}"></div>
```

В этом примере, на странице будет выведено "Hello, World!". Обратим внимание, что в качестве спецсимвола для обращения к сообщению используется `#{...}`. Почему это так, рассказывается [здесь](syntax-simple-expressions.md).

Если же нужно локализировать это сообщение на другой язык, то нужно создать файл локализации для этого языка. Например, для русского языка нужно создать файл `messages_ru.properties` и добавить туда сообщение:

```properties
hello=Привет, Мир!
```

Теперь, если пользователь запрашивает страницу на русском языке, то будет использован файл `messages_ru.properties` и на странице будет выведено "Привет, Мир!".

## Настройка кодировки файлов локализации
Убедитесь, что файлы локализации сохранены в кодировке UTF-8. Это особенно важно, если вы работаете в среде, где настройки по умолчанию могут использовать другую кодировку (например, в Windows это часто CP1251). Современные IDE, такие как IntelliJ IDEA или Eclipse, позволяют настроить кодировку для конкретных файлов или проекта в целом.

В application.properties или application.yml укажите следующие настройки для Spring Boot, чтобы гарантировать использование UTF-8:

```properties
spring.messages.encoding=UTF-8
```
Эта настройка обеспечивает, что Spring Boot будет корректно обрабатывать файлы свойств, загруженные из указанного базового имени.

### Использование Unicode в файлах свойств
Если возникают трудности с сохранением файлов в UTF-8 или есть другие ограничения, можно использовать символы Unicode в файлах свойств. Например, для русского текста "Привет, Мир!" можно записать:

```properties
hello=\u041F\u0440\u0438\u0432\u0435\u0442, \u041C\u0438\u0440!
```
Этот метод гарантирует, что текст будет корректно отображаться независимо от кодировки файла.

### Проверка настроек локализации в браузере
Убедитесь, что браузер правильно настроен для работы с нужным языком. Браузеры читают настройки языка и могут автоматически выбирать нужный файл локализации на основе этих настроек. В Thymeleaf, это управляется через настройки Spring MVC, которые автоматически интерпретируют заголовки запроса Accept-Language.

### Отладка проблем с локализацией
Если сообщения не отображаются на нужном языке, проверьте конфигурацию Spring MVC и убедитесь, что LocaleResolver настроен правильно. В Spring Boot стандартный LocaleResolver можно переопределить, чтобы обеспечить более точное управление выбором локали:

```java
@Bean
public LocaleResolver localeResolver() {
SessionLocaleResolver slr = new SessionLocaleResolver();
slr.setDefaultLocale(Locale.forLanguageTag("ru-RU"));  // Установка стандартной локали
return slr;
}
```
Этот код настраивает LocaleResolver, который сохраняет локаль в сессии пользователя и устанавливает русскую локаль как локаль по умолчанию.
# [**Назад**: *Синтаксис Thymeleaf*](../features/thymeleaf-syntax.md)_