# Transactional Propagation - REQUIRES_NEW в Java

**REQUIRES_NEW** - это режим распространения транзакции в Spring, который указывает, что метод должен быть выполнен в новой транзакции. Если уже существует активная транзакция, она будет приостановлена, и новая транзакция будет создана для выполнения метода.

### Когда использовать REQUIRES_NEW?

1. **Независимые транзакции**: Когда нужно гарантировать, что операции метода выполняются в отдельной транзакции, независимой от вызывающего контекста транзакции. Это особенно полезно, когда метод должен быть изолирован от текущей транзакции, чтобы избежать влияния других операций на его результаты.

2. **Точки сохранения (savepoints)**: Можно использовать REQUIRES_NEW, чтобы создавать точки сохранения (savepoints) внутри более крупной транзакции. Если вложенная транзакция завершается неудачно, можно откатить только её часть, сохраняя результаты предыдущих операций.

3. **Атомарные операции в рамках метода**: Когда метод выполняет несколько операций, которые должны быть атомарными, и требуется контроль над транзакционной границей и результатами.

### Пример:

```java
@Service
public class ExampleService {

    @Autowired
    private AnotherService anotherService;

    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void performOperation() {
        anotherService.requiresNewTransactionMethod(); // Создаст новую транзакцию
        // Другие операции
    }
}

@Service
public class AnotherService {

    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void requiresNewTransactionMethod() {
        // Логика, выполняющаяся в новой транзакции
    }
}
```
В методе performOperation, метод requiresNewTransactionMethod будет выполнен в рамках новой транзакции, даже если существует текущая. Это обеспечивает высокий уровень изоляции и обеспечивает независимость выполнения этой операции от других транзакций.