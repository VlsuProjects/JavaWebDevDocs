# Transactional Propagation - REQUIRED в Java

**REQUIRED** - один из режимов распространения транзакции в Spring. Этот режим указывает, что метод должен выполняться в рамках уже существующей транзакции, если она присутствует. Если же текущей транзакции нет, то будет создана новая.

### Когда использовать REQUIRED?

1. **Основные операции базы данных**: Если метод выполняет основные операции базы данных, включая вставку, обновление или удаление записей, часто желательно, чтобы эти операции выполнялись в рамках транзакции. Это обеспечивает целостность данных и предотвращает нежелательные изменения в случае ошибки.

2. **Бизнес-транзакции**: Когда метод выполняет несколько операций, которые должны быть атомарными - либо все успешны, либо ни одна не успешна, важно, чтобы эти операции выполнялись в рамках одной транзакции. REQUIRED гарантирует, что эти операции будут либо все выполнены успешно, либо все откатятся в случае ошибки.

3. **Контроль над транзакциями**: Используя REQUIRED, разработчики могут явно указать, что определенный метод должен быть выполнен в рамках транзакции, обеспечивая тем самым контроль над транзакционной границей.

### Пример:

```java
@Service
public class ExampleService {

    @Autowired
    private AnotherService anotherService;

    @Transactional(propagation = Propagation.REQUIRED)
    public void performOperation() {
        anotherService.requiredTransactionMethod(); // Если нет транзакции, создастся новая
        // Другие операции
    }
}

@Service
public class AnotherService {

    @Transactional(propagation = Propagation.REQUIRED)
    public void requiredTransactionMethod() {
        // Логика, выполняющаяся в рамках существующей транзакции или создающая новую
    }
}
```
В методе performOperation, метод requiredTransactionMethod будет выполнен в рамках существующей транзакции или создаст новую транзакцию. Это обеспечивает атомарность операций, предотвращая нежелательные изменения в базе данных в случае возникновения ошибок.