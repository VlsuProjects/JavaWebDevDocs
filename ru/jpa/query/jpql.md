# JPQL

Для описания запросов в JPA используется специальный язык запросов - JPQL (Java Persistence Query Language). JPQL очень
похож на SQL, но вместо таблиц и столбцов мы используем сущности и их поля.

Можно относиться к JPQL как к объектно-ориентированному SQL. В JPQL мы работаем с сущностями и их полями, а не с таблицами
и столбцами. Это позволяет нам писать запросы, которые не зависят от конкретной базы данных.

Также, JPQL позволяет использовать параметры в запросе, если это позволяет сделать контекст исполнения. Например, при
работе с репозиториями Spring Data JPA обычно в именованные запросы передаются параметры и при написании JPQL запроса
можно использовать эти параметры. Например:

```java
public interface UserRepository extends JpaRepository<User, Long> {
    @Query("SELECT u FROM User u WHERE u.name = :name")
    List<User> findByName(@Param("name") String name);
}
```

В этом примере мы создаем метод `findByName`, который возвращает список пользователей с указанным именем. Мы используем
аннотацию `@Query` для определения JPQL запроса. В запросе мы используем параметр `:name`, который будет передан из метода
`findByName`. Все параметры начинаются с двоеточия.

Также, можно обратить внимание, что мы прямо внутри запроса создаем объект `User` и можем обращаться к его полям, как к
полям объекта.

## Использование JPQL вне репозиториев

JPQL можно использовать не только в репозиториях Spring Data JPA, но и прямо в Java коде. Для этого можно использовать
специальный класс `Query`, который предоставляет JPA.

Например, чтобы выполнить JPQL запрос вне репозитория, можно использовать следующий код:

```java
Query query = entityManager.createQuery("SELECT u FROM User u WHERE u.name = :name");

query.setParameter("name", "Denis");

List<User> users = query.getResultList();
```

Как видим, весь функционал JPQL доступен и вне репозиториев. Мы создаем запрос, устанавливаем параметры и получаем
результат. Это позволяет использовать JPQL в различных частях приложения, где это необходимо.

# [**Следующий урок**: *Подробнее про именованные запросы в методах*](named-query.md)
