# Query in JPA

При создании JPA репозитория, мы наследуем его от интерфейса `JpaRepository`, который поставляет нам готовый набор методов
для работы с сущностями. Но зачастую этого не хватает, поэтому внутри репозитория мы можем определить собственные методы.

Такие методы называются *именованными запросами* (named queries). Именованные запросы позволяют определить запросы в репозитории и
использовать их в разных частях приложения. Это удобно, так как мы можем избежать дублирования кода и улучшить его 
читаемость.

## Создание именованных запросов

Для создания именованных запросов в репозитории, нам необходимо создать обычный метод, описав логику запроса 
в его названии. Например, если мы хотим найти всех пользователей по имени, мы можем создать метод с названием `findByName`.

```java
public interface UserRepository extends JpaRepository<User, Long> {
    List<User> findByName(String name);
}
```

Предположим, что у нас есть сущность `User` с полем `name`. В этом примере мы создаем метод `findByName`, который
возвращает список пользователей с указанным именем.

Как видим здесь, мы не определяем какой-либо логики самого запроса, мы просто используем название метода для описания
запроса. Spring Data JPA самостоятельно создаст запрос на основе названия метода.

## Аннотация Query

Если нам нужно определить более сложный запрос, который при описании в названии будет слишком большим или же описание
запроса в названии по той или иной причине невозможно, мы можем использовать аннотацию `@Query`. Аннотация `@Query`
позволяет нам написать запрос на специальном языке запросов JPQL (Java Persistence Query Language). Вот предыдущий
пример с использованием аннотации `@Query`:

```java
public interface UserRepository extends JpaRepository<User, Long> {
    @Query("SELECT u FROM User u WHERE u.name = :name")
    List<User> findByName(@Param("name") String name);
}
```

В данной ситуации имя метода не имеет значения, так как запрос определен в аннотации `@Query`. Мы указываем запрос
внутри аннотации, используя JPQL. В данном случае мы выбираем всех пользователей с указанным именем.

Как видим, JPQL очень похож на SQL, но вместо таблиц и столбцов мы используем сущности и их поля. Параметры запроса или
же конкретные данные, которые будут вставляться в запрос из параметров метода, мы выделяем двоеточием.

# [**Следующий урок**: *JPQL*](jpql.md)