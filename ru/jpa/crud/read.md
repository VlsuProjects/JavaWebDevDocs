# Чтение из базы данных

## Чтение одной записи

Для чтения одной записи из базы данных используется метод `find` интерфейса `EntityManager`. Метод `find` принимает два параметра: класс сущности и первичный ключ записи.

```java
User user = entityManager.find(User.class, 1L);
```

В этом примере, мы читаем запись из таблицы `user` с первичным ключом `1` и преобразуем ее в объект класса `User`.

Искать записи можно и по другим полям. Для этого в JPA используется специальный язык запросов JPQL (Java Persistence Query Language). Например, чтобы найти запись по имени, можно использовать следующий запрос:

```java
User user = entityManager.createQuery("SELECT u FROM User u WHERE u.name = :name", User.class)
    .setParameter("name", "John")
    .getSingleResult();
```

В этом примере, мы читаем запись из таблицы `user` с именем `John` и преобразуем ее в объект класса `User`. Как видим, `u` - это как бы переменная внутри запроса, которая ссылается на объект из таблицы, с которой мы работаем (в данном случае это таблица `user`). И также, как в обычной Java, мы обращаемся к полям объекта через точку.

Метод `getSingleResult` возвращает единственный результат запроса. Если результатов несколько, будет выброшено исключение. Если результатов нет, будет возвращено `null`.

## Чтение всех записей

Чтобы избежать исключения, описанного выше, можно считывать из запроса не один результат, а список результатов.

Это стоит делать, когда вы не уверены сколько результатов вернет запрос. Например в нашем случае, мы не можем утверждать, что в таблице `user` есть только один пользователь с именем `John`.

Для чтения всех записей из базы данных используется метод `createQuery` интерфейса `EntityManager`. Метод `createQuery` принимает запрос на языке JPQL.

```java
List<User> users = entityManager.createQuery("SELECT u FROM User u", User.class).getResultList();
```

В этом примере, мы читаем все записи из таблицы `user` и преобразуем их в список объектов класса `User`.

Теперь вы знаете, как читать данные из базы данных при помощи JPA.

# [**Вернуться к главной**](what-is-crud.md)