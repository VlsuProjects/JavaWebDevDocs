# Понимание авторизации аутентифицированными пользователями

## Введение в авторизацию аутентифицированными пользователями

Авторизация аутентифицированными пользователями в Spring Security предполагает предоставление доступа к ресурсам только пользователям, которые успешно прошли аутентификацию. В отличие от авторизации на основе ролей, которая сосредоточена на конкретных ролях, назначенных пользователям, авторизация аутентифицированными пользователями проверяет, прошел ли пользователь аутентификацию, прежде чем разрешить доступ к защищенным ресурсам.

## Настройка авторизации аутентифицированными пользователями

### Ограничение доступа для аутентифицированных пользователей
Настройте Spring Security для ограничения доступа к определенным ресурсам или конечным точкам только для аутентифицированных пользователей.

### Требование аутентификации
Укажите, что доступ к защищенным ресурсам требует аутентификации пользователя, либо через форму аутентификации, HTTP базовую аутентификацию или другие механизмы аутентификации, поддерживаемые Spring Security.

## Лучшие практики для авторизации аутентифицированными пользователями

### Защита чувствительных ресурсов
Используйте авторизацию аутентифицированными пользователями для защиты чувствительных ресурсов и предотвращения несанкционированного доступа к чувствительным данным или функциональности.

### Рассмотрение дополнительных правил авторизации
Помимо требования аутентификации, рассмотрите возможность реализации дополнительных правил или проверок авторизации на основе ролей пользователей, разрешений или других факторов для обеспечения точного управления доступом.

### Настройка обработки отказа в доступе
Настройте обработку отказа в доступе для предоставления осмысленной обратной связи пользователям, которые пытаются получить доступ к защищенным ресурсам без аутентификации. Это помогает улучшить пользовательский опыт и осведомленность о безопасности.

### Тестирование логики аутентификации
Тщательно протестируйте логику аутентификации, чтобы убедиться, что к защищенным ресурсам получают доступ только аутентифицированные пользователи. Протестируйте различные сценарии, включая успешную аутентификацию, неудачную аутентификацию и попытки доступа неаутентифицированных пользователей.

## Пример реализации

### Реализация контроллера
```java
@RestController
@RequestMapping("/api")
public class SecureController {

    @GetMapping("/secured")
    @PreAuthorize("isAuthenticated()")
    public String getSecuredResource() {
        return "Это защищенный ресурс, доступный только аутентифицированным пользователям.";
    }
}
```

В этом примере конечная точка `/api/secured` доступна только аутентифицированным пользователям, как указано в аннотации `@PreAuthorize("isAuthenticated()")`.

### Реализация HTTP-запросов
```java
.authorizeRequests()
    .antMatchers("/secured/**").authenticated()
```

## Заключение

Авторизация аутентифицированными пользователями гарантирует, что доступ к защищенным ресурсам разрешается только пользователям, которые успешно прошли аутентификацию. Конфигурируя Spring Security для требования аутентификации при доступе к чувствительным ресурсам и следуя лучшим практикам, разработчики могут повысить безопасность своих приложений и защититься от несанкционированного доступа.

---

# [Далее: Авторизация на основе ролей](role.md)